-- generated by pyha 0.0.6
library ieee;
    use ieee.std_logic_1164.all;
    use ieee.numeric_std.all;
    use ieee.fixed_float_types.all;
    use ieee.fixed_pkg.all;
    use ieee.math_real.all;

library work;
    use work.PyhaUtil.all;
    use work.Typedefs.all;
    use work.all;
    use work.ComplexSfix_0.all;


package FIR_2 is
    type next_t is record
        DELAY: integer;
        TAPS: Typedefs.sfixed0downto_17_list_t(0 to 127);
        acc: Typedefs.sfixed1downto_34_list_t(0 to 127);
        \out\: sfixed(0 downto -17);
    end record;

    type self_t is record
        DELAY: integer;
        TAPS: Typedefs.sfixed0downto_17_list_t(0 to 127);
        acc: Typedefs.sfixed1downto_34_list_t(0 to 127);
        \out\: sfixed(0 downto -17);
        \next\: next_t;
    end record;
    type FIR_2_self_t_list_t is array (natural range <>) of FIR_2.self_t;

    procedure main(self:inout self_t; x: sfixed(0 downto -17); ret_0:out sfixed(0 downto -17));

    -- internal pyha functions
    procedure pyha_update_registers(self:inout self_t);
    procedure pyha_reset(self:inout self_t);
    procedure pyha_init_next(self:inout self_t);
    procedure pyha_reset_constants(self:inout self_t);
    procedure pyha_deepcopy(self:inout self_t; other: in self_t);
    procedure pyha_list_deepcopy(self:inout FIR_2_self_t_list_t; other: in FIR_2_self_t_list_t);
end package;

package body FIR_2 is
    procedure main(self:inout self_t; x: sfixed(0 downto -17); ret_0:out sfixed(0 downto -17)) is
    -- Transposed FIR structure
        variable i: integer;
    begin
        for i in self.acc'range loop
            if i = 0 then
                self.\next\.acc(0) := resize(x * self.TAPS(self.TAPS'length-1), 1, -34, fixed_wrap, fixed_truncate);
            else
                self.\next\.acc(i) := resize(self.acc(i - 1) + x * self.TAPS(self.TAPS'length - 1 - i), 1, -34, fixed_wrap, fixed_truncate);

            end if;
        end loop;
        self.\next\.\out\ := resize(self.acc(self.acc'length-1), 0, -17, fixed_saturate, fixed_truncate);
        ret_0 := self.\out\;
        return;
    end procedure;

    procedure pyha_reset(self:inout self_t) is
        -- executed on reset signal. Reset values are determined from initial values of Python variables.
    begin
        self.\next\.DELAY := 2;
        self.\next\.TAPS := (Sfix(7.62939453125e-06, 0, -17), Sfix(7.62939453125e-06, 0, -17), Sfix(-1.52587890625e-05, 0, -17), Sfix(-7.62939453125e-06, 0, -17), Sfix(1.52587890625e-05, 0, -17), Sfix(3.0517578125e-05, 0, -17), Sfix(-1.52587890625e-05, 0, -17), Sfix(-5.340576171875e-05, 0, -17), Sfix(7.62939453125e-06, 0, -17), Sfix(9.1552734375e-05, 0, -17), Sfix(2.288818359375e-05, 0, -17), Sfix(-0.00012969970703125, 0, -17), Sfix(-9.1552734375e-05, 0, -17), Sfix(0.00016021728515625, 0, -17), Sfix(0.00019073486328125, 0, -17), Sfix(-0.00016021728515625, 0, -17), Sfix(-0.00032806396484375, 0, -17), Sfix(9.918212890625e-05, 0, -17), Sfix(0.00048828125, 0, -17), Sfix(3.814697265625e-05, 0, -17), Sfix(-0.0006561279296875, 0, -17), Sfix(-0.0002899169921875, 0, -17), Sfix(0.00077056884765625, 0, -17), Sfix(0.00066375732421875, 0, -17), Sfix(-0.00077056884765625, 0, -17), Sfix(-0.0011444091796875, 0, -17), Sfix(0.0005950927734375, 0, -17), Sfix(0.00168609619140625, 0, -17), Sfix(-0.00016021728515625, 0, -17), Sfix(-0.00220489501953125, 0, -17), Sfix(-0.00057220458984375, 0, -17), Sfix(0.00258636474609375, 0, -17), Sfix(0.001617431640625, 0, -17), Sfix(-0.00266265869140625, 0, -17), Sfix(-0.0029449462890625, 0, -17), Sfix(0.00226593017578125, 0, -17), Sfix(0.00441741943359375, 0, -17), Sfix(-0.00125885009765625, 0, -17), Sfix(-0.005859375, 0, -17), Sfix(-0.00048828125, 0, -17), Sfix(0.0069732666015625, 0, -17), Sfix(0.0030059814453125, 0, -17), Sfix(-0.0074462890625, 0, -17), Sfix(-0.00621795654296875, 0, -17), Sfix(0.00688934326171875, 0, -17), Sfix(0.00992584228515625, 0, -17), Sfix(-0.00494384765625, 0, -17), Sfix(-0.01377105712890625, 0, -17), Sfix(0.00125885009765625, 0, -17), Sfix(0.0172576904296875, 0, -17), Sfix(0.00444793701171875, 0, -17), Sfix(-0.019744873046875, 0, -17), Sfix(-0.0124359130859375, 0, -17), Sfix(0.02039337158203125, 0, -17), Sfix(0.02300262451171875, 0, -17), Sfix(-0.01807403564453125, 0, -17), Sfix(-0.03680419921875, 0, -17), Sfix(0.0109405517578125, 0, -17), Sfix(0.0557708740234375, 0, -17), Sfix(0.0053863525390625, 0, -17), Sfix(-0.08724212646484375, 0, -17), Sfix(-0.04834747314453125, 0, -17), Sfix(0.18050384521484375, 0, -17), Sfix(0.41330718994140625, 0, -17), Sfix(0.41330718994140625, 0, -17), Sfix(0.18050384521484375, 0, -17), Sfix(-0.04834747314453125, 0, -17), Sfix(-0.08724212646484375, 0, -17), Sfix(0.0053863525390625, 0, -17), Sfix(0.0557708740234375, 0, -17), Sfix(0.0109405517578125, 0, -17), Sfix(-0.03680419921875, 0, -17), Sfix(-0.01807403564453125, 0, -17), Sfix(0.02300262451171875, 0, -17), Sfix(0.02039337158203125, 0, -17), Sfix(-0.0124359130859375, 0, -17), Sfix(-0.019744873046875, 0, -17), Sfix(0.00444793701171875, 0, -17), Sfix(0.0172576904296875, 0, -17), Sfix(0.00125885009765625, 0, -17), Sfix(-0.01377105712890625, 0, -17), Sfix(-0.00494384765625, 0, -17), Sfix(0.00992584228515625, 0, -17), Sfix(0.00688934326171875, 0, -17), Sfix(-0.00621795654296875, 0, -17), Sfix(-0.0074462890625, 0, -17), Sfix(0.0030059814453125, 0, -17), Sfix(0.0069732666015625, 0, -17), Sfix(-0.00048828125, 0, -17), Sfix(-0.005859375, 0, -17), Sfix(-0.00125885009765625, 0, -17), Sfix(0.00441741943359375, 0, -17), Sfix(0.00226593017578125, 0, -17), Sfix(-0.0029449462890625, 0, -17), Sfix(-0.00266265869140625, 0, -17), Sfix(0.001617431640625, 0, -17), Sfix(0.00258636474609375, 0, -17), Sfix(-0.00057220458984375, 0, -17), Sfix(-0.00220489501953125, 0, -17), Sfix(-0.00016021728515625, 0, -17), Sfix(0.00168609619140625, 0, -17), Sfix(0.0005950927734375, 0, -17), Sfix(-0.0011444091796875, 0, -17), Sfix(-0.00077056884765625, 0, -17), Sfix(0.00066375732421875, 0, -17), Sfix(0.00077056884765625, 0, -17), Sfix(-0.0002899169921875, 0, -17), Sfix(-0.0006561279296875, 0, -17), Sfix(3.814697265625e-05, 0, -17), Sfix(0.00048828125, 0, -17), Sfix(9.918212890625e-05, 0, -17), Sfix(-0.00032806396484375, 0, -17), Sfix(-0.00016021728515625, 0, -17), Sfix(0.00019073486328125, 0, -17), Sfix(0.00016021728515625, 0, -17), Sfix(-9.1552734375e-05, 0, -17), Sfix(-0.00012969970703125, 0, -17), Sfix(2.288818359375e-05, 0, -17), Sfix(9.1552734375e-05, 0, -17), Sfix(7.62939453125e-06, 0, -17), Sfix(-5.340576171875e-05, 0, -17), Sfix(-1.52587890625e-05, 0, -17), Sfix(3.0517578125e-05, 0, -17), Sfix(1.52587890625e-05, 0, -17), Sfix(-7.62939453125e-06, 0, -17), Sfix(-1.52587890625e-05, 0, -17), Sfix(7.62939453125e-06, 0, -17), Sfix(7.62939453125e-06, 0, -17));
        self.\next\.acc := (Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34), Sfix(0.0, 1, -34));
        self.\next\.\out\ := Sfix(0.0, 0, -17);
        pyha_update_registers(self);
    end procedure;

    procedure pyha_update_registers(self:inout self_t) is
        -- loads 'next' values to registers, executed on clock rising edge
    begin
        self.acc := self.\next\.acc;
        self.\out\ := self.\next\.\out\;
    end procedure;

    procedure pyha_init_next(self:inout self_t) is
        -- sets all .next's to current register values, executed before 'main'. 
        -- thanks to this, '.next' variables are always written before read, so they can never be registers
    begin
        self.\next\.DELAY := self.DELAY;
        self.\next\.TAPS := self.TAPS;
        self.\next\.acc := self.acc;
        self.\next\.\out\ := self.\out\;
    end procedure;

    procedure pyha_reset_constants(self:inout self_t) is
        -- reset CONSTANTS, executed before 'main'. Helps synthesis tools to determine constants.
    begin
        self.DELAY := 2;
        self.TAPS := (Sfix(7.62939453125e-06, 0, -17), Sfix(7.62939453125e-06, 0, -17), Sfix(-1.52587890625e-05, 0, -17), Sfix(-7.62939453125e-06, 0, -17), Sfix(1.52587890625e-05, 0, -17), Sfix(3.0517578125e-05, 0, -17), Sfix(-1.52587890625e-05, 0, -17), Sfix(-5.340576171875e-05, 0, -17), Sfix(7.62939453125e-06, 0, -17), Sfix(9.1552734375e-05, 0, -17), Sfix(2.288818359375e-05, 0, -17), Sfix(-0.00012969970703125, 0, -17), Sfix(-9.1552734375e-05, 0, -17), Sfix(0.00016021728515625, 0, -17), Sfix(0.00019073486328125, 0, -17), Sfix(-0.00016021728515625, 0, -17), Sfix(-0.00032806396484375, 0, -17), Sfix(9.918212890625e-05, 0, -17), Sfix(0.00048828125, 0, -17), Sfix(3.814697265625e-05, 0, -17), Sfix(-0.0006561279296875, 0, -17), Sfix(-0.0002899169921875, 0, -17), Sfix(0.00077056884765625, 0, -17), Sfix(0.00066375732421875, 0, -17), Sfix(-0.00077056884765625, 0, -17), Sfix(-0.0011444091796875, 0, -17), Sfix(0.0005950927734375, 0, -17), Sfix(0.00168609619140625, 0, -17), Sfix(-0.00016021728515625, 0, -17), Sfix(-0.00220489501953125, 0, -17), Sfix(-0.00057220458984375, 0, -17), Sfix(0.00258636474609375, 0, -17), Sfix(0.001617431640625, 0, -17), Sfix(-0.00266265869140625, 0, -17), Sfix(-0.0029449462890625, 0, -17), Sfix(0.00226593017578125, 0, -17), Sfix(0.00441741943359375, 0, -17), Sfix(-0.00125885009765625, 0, -17), Sfix(-0.005859375, 0, -17), Sfix(-0.00048828125, 0, -17), Sfix(0.0069732666015625, 0, -17), Sfix(0.0030059814453125, 0, -17), Sfix(-0.0074462890625, 0, -17), Sfix(-0.00621795654296875, 0, -17), Sfix(0.00688934326171875, 0, -17), Sfix(0.00992584228515625, 0, -17), Sfix(-0.00494384765625, 0, -17), Sfix(-0.01377105712890625, 0, -17), Sfix(0.00125885009765625, 0, -17), Sfix(0.0172576904296875, 0, -17), Sfix(0.00444793701171875, 0, -17), Sfix(-0.019744873046875, 0, -17), Sfix(-0.0124359130859375, 0, -17), Sfix(0.02039337158203125, 0, -17), Sfix(0.02300262451171875, 0, -17), Sfix(-0.01807403564453125, 0, -17), Sfix(-0.03680419921875, 0, -17), Sfix(0.0109405517578125, 0, -17), Sfix(0.0557708740234375, 0, -17), Sfix(0.0053863525390625, 0, -17), Sfix(-0.08724212646484375, 0, -17), Sfix(-0.04834747314453125, 0, -17), Sfix(0.18050384521484375, 0, -17), Sfix(0.41330718994140625, 0, -17), Sfix(0.41330718994140625, 0, -17), Sfix(0.18050384521484375, 0, -17), Sfix(-0.04834747314453125, 0, -17), Sfix(-0.08724212646484375, 0, -17), Sfix(0.0053863525390625, 0, -17), Sfix(0.0557708740234375, 0, -17), Sfix(0.0109405517578125, 0, -17), Sfix(-0.03680419921875, 0, -17), Sfix(-0.01807403564453125, 0, -17), Sfix(0.02300262451171875, 0, -17), Sfix(0.02039337158203125, 0, -17), Sfix(-0.0124359130859375, 0, -17), Sfix(-0.019744873046875, 0, -17), Sfix(0.00444793701171875, 0, -17), Sfix(0.0172576904296875, 0, -17), Sfix(0.00125885009765625, 0, -17), Sfix(-0.01377105712890625, 0, -17), Sfix(-0.00494384765625, 0, -17), Sfix(0.00992584228515625, 0, -17), Sfix(0.00688934326171875, 0, -17), Sfix(-0.00621795654296875, 0, -17), Sfix(-0.0074462890625, 0, -17), Sfix(0.0030059814453125, 0, -17), Sfix(0.0069732666015625, 0, -17), Sfix(-0.00048828125, 0, -17), Sfix(-0.005859375, 0, -17), Sfix(-0.00125885009765625, 0, -17), Sfix(0.00441741943359375, 0, -17), Sfix(0.00226593017578125, 0, -17), Sfix(-0.0029449462890625, 0, -17), Sfix(-0.00266265869140625, 0, -17), Sfix(0.001617431640625, 0, -17), Sfix(0.00258636474609375, 0, -17), Sfix(-0.00057220458984375, 0, -17), Sfix(-0.00220489501953125, 0, -17), Sfix(-0.00016021728515625, 0, -17), Sfix(0.00168609619140625, 0, -17), Sfix(0.0005950927734375, 0, -17), Sfix(-0.0011444091796875, 0, -17), Sfix(-0.00077056884765625, 0, -17), Sfix(0.00066375732421875, 0, -17), Sfix(0.00077056884765625, 0, -17), Sfix(-0.0002899169921875, 0, -17), Sfix(-0.0006561279296875, 0, -17), Sfix(3.814697265625e-05, 0, -17), Sfix(0.00048828125, 0, -17), Sfix(9.918212890625e-05, 0, -17), Sfix(-0.00032806396484375, 0, -17), Sfix(-0.00016021728515625, 0, -17), Sfix(0.00019073486328125, 0, -17), Sfix(0.00016021728515625, 0, -17), Sfix(-9.1552734375e-05, 0, -17), Sfix(-0.00012969970703125, 0, -17), Sfix(2.288818359375e-05, 0, -17), Sfix(9.1552734375e-05, 0, -17), Sfix(7.62939453125e-06, 0, -17), Sfix(-5.340576171875e-05, 0, -17), Sfix(-1.52587890625e-05, 0, -17), Sfix(3.0517578125e-05, 0, -17), Sfix(1.52587890625e-05, 0, -17), Sfix(-7.62939453125e-06, 0, -17), Sfix(-1.52587890625e-05, 0, -17), Sfix(7.62939453125e-06, 0, -17), Sfix(7.62939453125e-06, 0, -17));
    end procedure;

    procedure pyha_deepcopy(self:inout self_t; other: in self_t) is
        -- copy 'other' to 'self.next'. ':=' cannot be used as it would directly copy to 'self'
    begin
        self.\next\.DELAY := other.DELAY;
        self.\next\.TAPS := other.TAPS;
        self.\next\.acc := other.acc;
        self.\next\.\out\ := other.\out\;
    end procedure;

    procedure pyha_list_deepcopy(self:inout FIR_2_self_t_list_t; other: in FIR_2_self_t_list_t) is
        -- run deepcopy for each list element
    begin
        for i in self'range loop
            pyha_deepcopy(self(i), other(i));
        end loop;
    end procedure;

end package body;
